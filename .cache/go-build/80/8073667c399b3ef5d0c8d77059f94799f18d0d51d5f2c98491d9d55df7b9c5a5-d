// Code generated by cmd/cgo; DO NOT EDIT.

//line /tmp/yay/src/gopath/pkg/mod/github.com/!jguer/go-alpm/v2@v2.0.2/callbacks.go:1:1
// callbacks.go - Handles libalpm callbacks.
//
// Copyright (c) 2013 The go-alpm Authors
//
// MIT Licensed. See LICENSE for details.

package alpm

/*
#include <stdint.h>
#include <alpm.h>
void logCallback(alpm_loglevel_t level, char *cstring);
void go_alpm_log_cb(alpm_loglevel_t level, const char *fmt, va_list arg);
void go_alpm_set_logging(alpm_handle_t *handle);
void go_alpm_set_question(alpm_handle_t *handle);
*/
import _ "unsafe"

import (
	"unsafe"
)

type (
	logCallbackSig      func(LogLevel, string)
	questionCallbackSig func(QuestionAny)
)

var DefaultLogLevel = LogWarning

func DefaultLogCallback(lvl LogLevel, s string) {
	if lvl <= DefaultLogLevel {
		print("go-alpm: ", s)
	}
}

var (
	globalLogCallback      logCallbackSig
	globalQuestionCallback questionCallbackSig
)

//export logCallback
func logCallback(level  /*line :42:24*/_Ctype_alpm_loglevel_t /*line :42:41*/, cstring * /*line :42:52*/_Ctype_char /*line :42:58*/) {
	globalLogCallback(LogLevel(level), ( /*line :43:37*/_Cfunc_GoString /*line :43:46*/)(cstring))
}

//export questionCallback
func questionCallback(question * /*line :47:33*/_Ctype_alpm_question_t /*line :47:50*/) {
	q := (* /*line :48:9*/_Ctype_alpm_question_any_t /*line :48:30*/)(unsafe.Pointer(question))
	globalQuestionCallback(QuestionAny{q})
}

func (h *Handle) SetLogCallback(cb logCallbackSig) {
	globalLogCallback = cb
	func() { _cgo0 := /*line :54:24*/h.ptr; _cgoCheckPointer(_cgo0, nil); _Cfunc_go_alpm_set_logging(_cgo0); }()
}

func (h *Handle) SetQuestionCallback(cb questionCallbackSig) {
	globalQuestionCallback = cb
	func() { _cgo0 := /*line :59:25*/h.ptr; _cgoCheckPointer(_cgo0, nil); _Cfunc_go_alpm_set_question(_cgo0); }()
}
